<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>G12 / Performance</title>

  <!-- Police -->
  <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">



  <style>
    :root{
      --color-bg:#050A14;
      --color-text:#E6EEF8;
      --color-white:#FFFFFF;
      --color-primary:#00B2FF;
      --color-secondary:#6633FF;
      --color-button:#0066ff;

      --max-width:1200px;       /* ✅ largeur max desktop */
      --nav-height:3.75rem;
      --spacing:1rem;
      --blur-level:0.5rem;

      --card-bg:rgba(255,255,255,.05);
      --card-radius:.5rem;
    }
      /* --- Transition fade entre pages --- */
html.is-animating body {
  opacity: 0;
  transition: opacity .28s ease; /* durée sortie */
}
/* État de base : invisible au chargement */
body {
  opacity: 0;
  transition: opacity .4s ease;
}

/* Quand prêt → visible */
body.page-loaded {
  opacity: 1;
}

/* Sortie (clic lien) */
html.is-animating body {
  opacity: 0;
}


    /* Base */
    *,*::before,*::after{box-sizing:border-box}
    html,body{margin:0;padding:0;max-width:100vw;overflow-x:hidden;scroll-behavior:smooth}
    body{
      background:var(--color-bg);
      color:var(--color-text);
      font-family:'Nunito Sans',system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif;
      font-weight:500;
    }
    img{max-width:100%;height:auto;display:block}
    a{text-decoration:none;color:inherit}

    .container{max-width:var(--max-width);margin:0 auto;padding:0 calc(var(--spacing)*1.25)}

    main{padding-top:calc(var(--nav-height) + 1rem)}

    body.performance {
  background: var(--color-bg);
}
body.performance::before {
  content:"";
  position: fixed;
  inset: 0;
  z-index: -1;
  background:
    radial-gradient(120% 160% at 100% 0%, rgba(102,51,255,.12), transparent 60%),
    radial-gradient(120% 160% at 0% 100%, rgba(0,178,255,.12), transparent 60%),
    var(--color-bg);
  box-shadow: inset 0 0 200px rgba(0,0,0,.4); /* vignette */
}


    /* ================= NAVBAR (copie fidèle + anim) ================= */
    nav{
      position:fixed; top:0; left:0; right:0; z-index:5000;
      height:var(--nav-height);
      background:transparent;
      transition:background .3s ease, backdrop-filter .3s ease;
    }
    nav.scrolled{ background:rgba(1,4,10,.4); backdrop-filter:blur(.75rem); }

    .nav-inner{
      height:var(--nav-height);
      display:flex; justify-content:space-between; align-items:flex-end;
      padding:var(--spacing);
      max-width:var(--max-width); margin:0 auto;
    }
    .logo img{ height:1.8rem; }

    /* Burger (mobile) */
    .nav-toggle{
      background:none; border:none; cursor:pointer;
      width:2.10rem; height:1.5rem; z-index:9999;
      display:flex; flex-direction:column; justify-content:center; align-items:center; gap:4px;
    }
    .nav-toggle span{
      display:block; width:100%; height:.125rem; background:var(--color-white);
      transition:transform .3s, opacity .3s;
    }

    /* Panneau mobile */
    .nav-container{
      position:absolute; top:var(--nav-height); right:var(--spacing); left:auto;
      display:none; flex-direction:column; gap:1rem;
      width:min(92vw,20rem);
      background:rgba(0,0,0,.43);
      padding:var(--spacing);
      border-radius:.5rem;
      border:1px solid rgba(255,255,255,.08);
      box-shadow:0 12px 24px rgba(0,0,0,.35);
      transform-origin:top right;
      transform:translateY(-8px);
      opacity:0;
      transition:transform .18s ease, opacity .18s ease;
    }
    body.nav-open .nav-container{ display:flex; transform:translateY(0); opacity:1; }

    .nav-list{ list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:1rem; }
    .nav-list li a{
      display:flex; align-items:center; min-height:44px;
      color:var(--color-white); font-weight:500; font-size:1.2rem; position:relative;
    }
    .nav-list li a::after{
      content:''; position:absolute; left:0; bottom:-.125rem; width:0; height:.125rem;
      background:var(--color-secondary); transition:width .3s;
    }
    .nav-list li a:hover::after{ width:100%; }

.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 1rem 3rem;       /* ↑ augmente l’air (largeur) */
  font-weight: 600;
  border-radius: .7rem;
  font-size: 1rem;
  white-space: nowrap;
  cursor: pointer;
  border: none;             /* pas de bordure parasite */
}

.btn-primary {
  background: var(--color-button);
  color: var(--color-white);
  transition: transform .2s ease, background .3s ease;
}

.btn-primary:hover {
  transform: scale(1.05);
}
/* retire le surlignement/soulignement au hover et focus */
.btn:focus,
.btn:hover,
.btn:active {
  text-decoration: none !important;
  outline: none !important;
  box-shadow: none !important;
}



    /* Blur du contenu + backdrop cliquable quand menu ouvert */
    body>*:not(nav){transition:filter .3s}
    body.nav-open>*:not(nav){filter:blur(var(--blur-level)); pointer-events:none}
    .nav-backdrop{position:fixed; inset:0; background:rgba(0,0,0,.35); backdrop-filter:blur(2px); z-index:4999; display:none}
    body.nav-open .nav-backdrop{display:block}

    /* Desktop */
    @media (min-width:64rem){
      .nav-toggle{display:none}
      .nav-container{
        position:static; display:block; width:100%; background:transparent; padding:0;
        border:0; border-radius:0; box-shadow:none; transform:none; opacity:1;
      }
      .nav-inner{align-items:center}
      .nav-list{flex-direction:row; align-items:center; gap:1rem; justify-content:center; width:100%; padding-right:10rem}
      .nav-list li a{font-size:.95rem; padding:.55rem .35rem}
      .nav-list > li:last-child{ position:absolute; right:calc((100vw - var(--max-width))/2 + 1.25rem); top:50%; transform:translateY(-50%); }
      body.nav-open>*:not(nav):not(.nav-backdrop){ filter:none !important; pointer-events:auto !important; }
      .nav-backdrop{display:none !important}
    }

    /* Intro */


.hero-perf .intro {
  margin-top: 5rem;
  max-width: 640px;
  font-size: 4rem;
  line-height: 1.5;
  text-align: left;
  opacity: .9;
}
.update-note {
  font-size: 0.8rem;
  text-align: left;
  margin-top: 0.3rem;
  color: #aaa;
  font-style: italic;
}
#performance h2 {
  font-size: 2.5rem;   /* ou la taille que tu veux */
  font-weight: 700;
  margin-top: 5rem;    /* espace au-dessus */
  text-align: left;  /* si tu veux le garder centré */
}



/* ===== Résumé — cartes KPI ===== */

/* grille 2x2 mobile / 4 colonnes desktop */
.summary-cards{
  display: grid;
  grid-template-columns: repeat(2, 1fr);   /* ✅ 2 colonnes sur tel */
  gap: 1rem;
  margin: 2rem 0 3rem;
}
@media (min-width: 64rem){
  .summary-cards{ grid-template-columns: repeat(4, 1fr); } /* ✅ desktop */
}

/* carte */
.summary-cards .card{
  position: relative;
  overflow: hidden;
  border-radius: 16px;
  padding: 1.25rem 1rem;
  text-align: center;                /* ✅ textes centrés */
  display: flex;                     /* centrage vertical + horizontal propre */
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 110px;

  /* ✅ fond: noir (haut) -> gris foncé (bas) */
  background: #00000000;
  border: 0px solid rgba(255, 255, 255, 0);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.511);
  transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease;
}
.summary-cards .card:hover{
  transform: translateY(-4px);
  box-shadow: 0 12px 26px rgba(0, 0, 0, 0.63);
  border-color: rgba(255, 255, 255, 0.421);
}

/* titre (h3) avec TON dégradé et texte centré */
.summary-cards .card h3{
  margin: 0 0 .5rem;
  font-size: 1rem;
  font-weight: 700;
  line-height: 1.2;
  /* ✅ gradient texte (fourni) */
  background: linear-gradient(127deg,
    rgba(138, 10, 255, 1) 0%,
    rgba(58, 63, 255, 1) 50%,
    rgba(0, 201, 232, 1) 100%);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;                /* indispensable pour voir le gradient */
  text-align: center;
}

/* valeur (p) */
.summary-cards .card p{
  margin: 0;
  font-size: 1.3rem;
  font-weight: 700;
  color: var(--color-white, #FFFFFF);
  letter-spacing: .2px;
  text-align: center;                /* ✅ centré */
}

/* petites tailles: un peu plus de hauteur pour l’aération */
@media (max-width: 23.5rem){
  .summary-cards .card{ min-height: 120px; }
}

.chart-header {
  display: flex;
  justify-content: flex-end;
  margin-bottom: .5rem;
}
.chart-buttons button {
  background: #050a14;
  border: 1px solid rgba(255,255,255,0.15);
  color: #E6EEF8;
  font-size: 0.85rem;
  padding: .4rem .8rem;
  margin-left: .4rem;
  border-radius: 6px;
  cursor: pointer;
  transition: all .2s;
}
.chart-buttons button:hover {
  background: rgba(0,178,255,0.2);
  border-color: #00B2FF;
}
.chart-buttons button.active {
  background: #00B2FF;
  border-color: #00B2FF;
  color: #fff;
}
.panel{
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 16px;
  background: transparent;          /* ← plus de fond plein */
  padding: 1rem;
  box-shadow: 0 10px 26px rgba(0,0,0,0.35);
}

/* Conteneur du graphique */
#tvlChart {
  width: 100% !important;
  height: 500px !important; /* hauteur par défaut (desktop/tablette) */
}

/* Ajustements mobiles pour la section TVL */
@media (max-width: 768px) {
  .chart-section h2 {
    text-align: center; /* ✅ centre le titre */
  }

  .chart-section {
    padding-left: 0;
    padding-right: 0; /* ✅ supprime marges latérales éventuelles */
  }
}


/* ===== TVL : plein écran propre & collé à gauche (mobile only) ===== */
@media (max-width: 768px) {
  /* on fait sortir la section du padding de .container pour prendre tout l'écran */
  .chart-section {
    position: relative;
    left: 50%;
    right: 50%;
    width: 100vw;
    margin-left: -50vw;   /* full-bleed à gauche */
    margin-right: -50vw;  /* full-bleed à droite */
    padding-left: 0;
    padding-right: 0;
  }

  /* titre centré */
  .chart-section h2 {
    text-align: center;
    padding-left: 1rem;
    padding-right: 1rem;
  }

  /* boutons: petite respiration */
  .chart-header {
    padding-left: 1rem;
    padding-right: 1rem;
  }

  /* le conteneur chart occupe 100% de la section */
  #tvlChart {
    width: 100% !important;
    height: 320px !important;   /* plus compact sur mobile */
    margin-left: 0 !important;  /* pas de marge parasite */
  }
}

/* même style de boutons que la TVL */
#weekly-returns .chart-header { display:flex; justify-content:flex-end; margin-bottom:.5rem }
#weekly-returns .chart-buttons button{
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.15);
  color: #E6EEF8; font-size:.85rem; padding:.4rem .8rem; margin-left:.4rem;
  border-radius: 6px; cursor:pointer; transition: all .2s;
}
#weekly-returns .chart-buttons button:hover{ background: rgba(0,178,255,0.2); border-color:#00B2FF }
#weekly-returns .chart-buttons button.active{ background:#00B2FF; border-color:#00B2FF; color:#fff }

/* Mobile : titre centré et hauteur compacte */
@media (max-width:768px){
  #weekly-returns h2{ text-align:center }
  #weeklyChart{ height:300px !important }
}

/* ==== GRID (desktop 1x2, mobile empilé) ==== */
.analytics-grid{
  display:grid;
  grid-template-columns:1fr;
  gap:1rem;
  margin:2rem 0 3rem;
}
@media (min-width: 64rem){
  .analytics-grid{
    grid-template-columns:1fr 1fr; /* 1x2 sur desktop */
    align-items:start;
  }
}

/* Panels style (match tes cartes) */
.panel{
  border:0px solid rgba(255,255,255,0.08);
  border-radius:16px;
  background: #'transparent';
  padding:1rem;
}
.panel h2{ margin:0 0 .75rem; font-size:1.25rem }

.chart-header{
  display:flex;
  justify-content:flex-end;
  margin-bottom:.5rem;
}
.chart-buttons button{
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.15);
  color: #E6EEF8;
  font-size: 0.85rem;
  padding: .4rem .8rem;
  margin-left: .4rem;
  border-radius: 6px;
  cursor: pointer;
  transition: all .2s;
}
.chart-buttons button:hover{ background: rgba(0,178,255,0.2); border-color:#00B2FF }
.chart-buttons button.active{ background:#00B2FF; border-color:#00B2FF; color:#fff }

/* ==== MOBILE : même “full-bleed/padding” que la TVL ==== */
@media (max-width: 768px){
  .analytics-grid{
    position: relative;
    left: 50%;
    width: 100vw;
    margin-left: -50vw;
    padding-left: 0;
    padding-right: 0;
  }
  .panel{
    border-radius:0;           /* même rendu plein écran que la TVL */
    border-left:0; border-right:0;
  }
  .panel h2{ text-align:center }
  #weeklyChart{ height:300px !important }
  #allocDonut{ height:300px !important }
}

.sim-intro {
  font-size: 0.85rem;
  opacity: 0.85;
  margin-top: -0.3rem;
  margin-bottom: 0.8rem;
  text-align: left;
}


    /* ================== Footer (copie fidèle) ================== */
    #footer{ background:'transparent'; color:var(--color-text); padding:4rem 2rem 2rem; font-size:.875rem; }
    .footer-container{ display:flex; flex-direction:column; gap:2rem; max-width:var(--max-width); margin:0 auto; }
    @media (min-width:48em){ .footer-container{ flex-direction:row; justify-content:space-between; align-items:flex-start; } }
    .footer-logo img{ height:2rem }
    .footer-links h3,.footer-contact h3,.footer-legal-social h3{ font-size:1rem; color:#fff; margin-bottom:1rem }
    .footer-links ul{ list-style:none; padding:0 }
    .footer-links li{ margin-bottom:.5rem }
    .footer-links a:hover{ color:var(--color-secondary); transition:color .3s }
    .footer-contact p{ margin:.25rem 0 }
    .footer-contact a{ color:var(--color-text) }
    .footer-contact a:hover{ color:var(--color-secondary) }
    .footer-legal-social .legal{ list-style:none; display:flex; flex-wrap:wrap; gap:1rem; padding:0; margin-bottom:1rem }
    .footer-legal-social .legal li a{ font-size:.75rem; color:var(--color-text) }
    .footer-legal-social .legal li a:hover{ color:var(--color-secondary) }
    .social a{ margin-right:1rem; font-size:1.25rem; color:var(--color-text) }
    .social a:hover{ color:var(--color-secondary) }
    .footer-bottom{ text-align:center; margin-top:2rem; font-size:.75rem; color:var(--color-text) }

    /* ============ Contenu page Performance (placeholder) ============ */
    .hero-perf{ padding:4rem 0 2rem }
    .hero-perf h1{ font-size:clamp(1.8rem,1.2rem + 2.5vw,2.6rem); margin:0 0 .75rem }
    .hero-perf p{ margin:0; opacity:.95 }

    .cards{ display:grid; grid-template-columns:1fr; gap:1rem; margin:2rem 0 }
    @media (min-width:48em){ .cards{ grid-template-columns:repeat(2,1fr) } }
    @media (min-width:80em){ .cards{ grid-template-columns:repeat(3,1fr) } }

    .card{
      border:1px solid #050a14;
      border-radius:14px;
      background:#050a14;
      padding:1rem;
      box-shadow:0 10px 26px #050a14;
    }
    .card h3{ margin:0 0 .4rem; font-size:1.1rem }
    .card p{ margin:0; opacity:.9 }

    @media (max-width: 768px) {
  /* On fait déborder uniquement la section chart pour full-bleed */
  .chart-section {
    width: 100vw;         /* occupe tout l'écran */
    margin-left: -50vw;   /* sort du container */
    left: 50%;
    position: relative;
    padding-left: 0;
    padding-right: 0;
  }

  .chart-section h2 {
    text-align: center;   /* titre centré */
  }

  #tvlChart {
    width: 100% !important;
    height: 320px !important; /* plus compact sur mobile */
    margin-left: 0 !important;
  }
}
/* ====== Second deck : grid 1x2 (empilé sur mobile) ====== */
.second-deck {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;
  margin: 2rem 0 3rem;
}
@media (min-width: 64rem){
  .second-deck { grid-template-columns: 1fr 1fr; }
}

.panel .muted {
  display:block; margin-top:.5rem; opacity:.7; font-size:.85rem;
}

/* Simulateur */
.panel-sim .sim-controls{
  display:grid; grid-template-columns: 1fr 1fr; gap: .75rem 1rem; margin-bottom: 1rem;
}
.panel-sim .field { display:flex; align-items:center; gap:.5rem; }
.panel-sim label { font-size:.9rem; opacity:.9; }
.panel-sim input{
  background: linear-gradient(180deg,#0b1220 0%, #131b2a 100%);
  border:1px solid rgba(255,255,255,.12);
  color:#E6EEF8; border-radius:8px; padding:.45rem .6rem; width:120px;
  outline:none;
}
.panel-sim input:focus{ border-color:#00B2FF; box-shadow:0 0 0 3px rgba(0,178,255,.15); }

/* Tableau résultat */
#simTableWrap table{
  width:100%; border-collapse: collapse; overflow:hidden;
  border:1px solid rgba(255,255,255,.08); border-radius:12px;
  background: linear-gradient(180deg, #0b1220 0%, #141922 100%);
}
#simTableWrap th, #simTableWrap td{
  padding:.75rem .9rem; text-align:left; border-bottom:1px solid rgba(255,255,255,.06);
}
#simTableWrap thead th{
  font-size:.85rem; letter-spacing:.3px;
  background: #3b5b95be;
}
#simTableWrap tbody tr:hover{ background: rgba(255,255,255,.03); }
#simTableWrap td.value { font-weight:700; }

/* Mobile full-bleed comme les autres charts */
@media (max-width:768px){
  .second-deck{
    position: relative; left: 50%; width: 100vw; margin-left: -50vw;
  }
  .panel{ border-radius:0; border-left:0; border-right:0; }
}

/* Tooltips (même style que index) */
.tooltip{ position: relative; display: inline-flex; align-items: center; gap: .5rem; }
.tip-icon{
  appearance:none; border:1px solid rgba(255,255,255,.25);
  background:transparent; color:#fff;
  font:700 .85rem/1 system-ui, -apple-system, "Segoe UI", Inter, Arial, sans-serif;
  border-radius:999px; width:1.25rem; height:1.25rem;
  display:grid; place-items:center; cursor:help;
  transition:border-color .2s, box-shadow .2s;
}
.tip-icon:hover, .tip-icon:focus-visible{
  border-color: rgba(255,255,255,.5);
  box-shadow: 0 0 0 4px rgba(102,51,255,.12);
  outline: none;
}
.tooltip::after{
  content: attr(data-tip);
  position: absolute; left: 50%;
  transform: translateX(-50%) translateY(8px);
  bottom: -2.25rem;
  min-width: 260px; max-width: min(92vw, 560px);
  padding: .55rem .7rem;
  border: 1px solid rgba(255,255,255,.12);
  border-radius: 10px;
  background: rgba(10,12,16,.95);
  color: rgba(230,238,248,.95);
  font: 500 .85rem/1.35 system-ui, -apple-system, "Segoe UI", Inter, Arial, sans-serif;
  box-shadow: 0 8px 18px rgba(0,0,0,.35);
  opacity: 0; pointer-events: none;
  transition: opacity .2s ease, transform .2s ease;
  z-index: 10;
}
.tooltip:hover::after, .tooltip:focus-within::after{
  opacity: 1; transform: translateX(-50%) translateY(0);
}



  </style>
</head>
<body class="performance">

  <!-- NAVBAR -->
  <nav id="navbar">
    <div class="nav-inner container">
      <div class="logo">
        <a href="index.html#home"><img src="logo-off-blanc.png" alt="G12"></a>
      </div>

      <button class="nav-toggle" aria-label="Ouvrir le menu" aria-expanded="false">
        <span></span><span></span><span></span>
      </button>

      <div class="nav-container" id="menu">
        <ul class="nav-list">
          <li><a href="index.html#home">Accueil</a></li>
          <li><a href="index.html#features">Notre produit</a></li>
          <li><a href="performance.html">Performance</a></li>
          <li><a href="documentation.html">Documentation</a></li>
          <li><a href="blog.html">Blog</a></li>
          <li><a href="#footer">Contact</a></li>
          <li><a href="index.html#newsletter" class="btn btn-primary btn-login">S’inscrire</a></li>
        </ul>
      </div>
    </div>
  </nav>
  <div class="nav-backdrop" hidden></div>

  <!-- CONTENU -->
  <main class="container">
  <section id="performance" class="section">
  <h2>Performance</h2>
  <p class="subtitle">Découvre nos résultats hebdomadaires et suivez l’évolution du fonds en toute transparence</p>
  <p class="update-note" id="kpi-updated">Données en cours de chargement…</p>
  <p class="update-note">Données mises à jour le 29/09/2025</p>

</section>


  <!-- Résumé en cartes -->
  <section class="summary-cards">
    <div class="card">
      <h3>APY estimé</h3>
      <p id="kpi-apy">—</p>
    </div>
    <div class="card">
      <h3>Rendement hebdo</h3>
      <p id="kpi-weekly">—</p>
    </div>
    <div class="card">
      <h3>TVL actuelle</h3>
      <p id="kpi-tvl">—</p>
    </div>
    <div class="card">
      <h3>Investisseurs</h3>
      <p id="kpi-investors">—</p>
    </div>
  </section>

<section class="chart-section">
<h2 class="tooltip" data-tip="Montant total bloqué dans le fond (Total Value Locked).">
  Évolution de la TVL
  <button class="tip-icon" aria-label="Infos sur la TVL">ⓘ</button>
</h2>
  <div class="chart-header">
    <div class="chart-buttons">
      <button data-range="1M">1M</button>
      <button data-range="3M">3M</button>
      <button data-range="6M">6M</button>
      <button data-range="YTD">YTD</button>
      <button data-range="ALL">ALL</button>
    </div>
  </div>
  <div id="tvlChart" style="width:100%;height:500px;"></div>
</section>

<!-- ==== ANALYTICS GRID: Weekly returns (left) + Allocation donut (right) ==== -->
<section class="analytics-grid">

  <!-- Panel LEFT : Weekly Returns -->
  <div class="panel panel-weekly">
<h2 class="tooltip" data-tip="Variation hebdomadaire des rendements du fonds.">
  Rendement hebdomadaire
  <button class="tip-icon" aria-label="Infos sur le rendement hebdo">ⓘ</button>
</h2>

    <div class="chart-header">
      <div class="chart-buttons" id="wr-buttons">
        <button data-range="3M" class="active">3M</button>
        <button data-range="6M">6M</button>
        <button data-range="YTD">YTD</button>
        <button data-range="ALL">ALL</button>
      </div>
    </div>

    <div id="weeklyChart" style="width:100%;height:420px;"></div>
  </div>

  <!-- Panel RIGHT : Allocation donut (placeholder) -->
  <div class="panel panel-donut">
<h2 class="tooltip" data-tip="Répartition du capital entre les différentes stratégies de trading et DeFi.">
  Allocation par stratégie
  <button class="tip-icon" aria-label="Infos sur l’allocation">ⓘ</button>
</h2>
    <div id="allocDonut" style="width:100%;height:420px;"></div>
  </div>

</section>
<section class="analytics-grid second-deck">
  <!-- LEFT : Drawdown -->
  <div class="panel panel-dd">
<h2 class="tooltip" data-tip="Drawdown : perte maximale enregistrée depuis le plus haut atteint (mesure du risque).">
  Drawdown
  <button class="tip-icon" aria-label="Infos sur le drawdown">ⓘ</button>
</h2>
  <!-- ✅ Boutons de période -->
  <div class="chart-header">
    <div class="chart-buttons" id="dd-buttons">
      <button data-range="3M" class="active">3M</button>
      <button data-range="6M">6M</button>
      <button data-range="YTD">YTD</button>
      <button data-range="ALL">ALL</button>
    </div>
  </div>

  <div id="ddChart" style="width:100%;height:380px;"></div>
  <small class="muted">Plus c’est bas, plus la baisse depuis le plus haut est profonde (en %).</small>
</div>


  <!-- RIGHT : Simulateur de capital -->
  <div class="panel panel-sim">
    <h2>Simulateur de capital (APY)</h2>
    <p class="sim-intro">Entrez un montant et un rendement annuel estimé pour projeter vos gains potentiels.</p>


    <div class="sim-controls">
      <div class="field">
        <label>Montant initial ($)</label>
        <input id="simAmount" type="number" min="0" step="10" value="1000">
      </div>
      <div class="field">
        <label>APY (annuel)</label>
        <input id="simApy" type="number" min="0" step="0.1" value="28"> <span>%</span>
      </div>
    </div>

    <div id="simTableWrap"></div>
    <small class="muted">Hypothèse : capitalisation hebdomadaire, sans dépôts/retraits.</small>
  </div>
</section>

<!-- Bouton portail investisseur -->
<div class="auth-btn-wrapper" style="margin-top:16px;">
  <a href="/login.html" id="open-auth" class="g12-auth-btn"
     style="display:inline-block;padding:10px 16px;border-radius:8px;border:1px solid #ccc;text-decoration:none;cursor:pointer;">
    Créer un compte / Se connecter
  </a>
</div>



  <!-- FOOTER -->
  <footer id="footer">
    <div class="container footer-container">
      <div class="footer-logo">
        <img src="logo-off-blanc.png" alt="Logo G12">
      </div>
      <div class="footer-links">
        <h3>Liens utiles</h3>
        <ul>
          <li><a href="index.html#home">Accueil</a></li>
          <li><a href="index.html#features">Notre produit</a></li>
          <li><a href="index.html#roadmap">Roadmap</a></li>
          <li><a href="index.html#faq">FAQ</a></li>
          <li><a href="documentation.html">Documentation</a></li>
          <li><a href="performance.html">Performance</a></li>
        </ul>
      </div>
      <div class="footer-contact">
        <h3>Contact</h3>
        <p><a href="mailto:support@g12.finance">support@g12.finance</a></p>
      </div>
      <div class="footer-legal-social">
        <ul class="legal">
          <li><a href="#">Conditions générales</a></li>
          <li><a href="#">Politique de confidentialité</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">© 2025 G12. Tous droits réservés.</div>
  </footer>

  <!-- ================== JS NAVBAR (animations) ================== -->
  <script>
    (function(){
      const body = document.body;
      const nav = document.getElementById('navbar');
      const burger = document.querySelector('.nav-toggle');
      const menu = document.getElementById('menu');
      const backdrop = document.querySelector('.nav-backdrop');

      const openMenu = () => {
        body.classList.add('nav-open');
        burger.setAttribute('aria-expanded', 'true');
        backdrop.removeAttribute('hidden');
      };
      const closeMenu = () => {
        body.classList.remove('nav-open');
        burger.setAttribute('aria-expanded', 'false');
        backdrop.setAttribute('hidden','');
      };
      const toggleMenu = () => body.classList.contains('nav-open') ? closeMenu() : openMenu();

      // Burger click
      burger.addEventListener('click', (e) => {
        e.stopPropagation();
        toggleMenu();
      });

      // Backdrop click
      backdrop.addEventListener('click', closeMenu);

      // ESC pour fermer
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') closeMenu();
      });

      // Changement de fond au scroll
      const onScroll = () => {
        if (window.scrollY > 8) nav.classList.add('scrolled');
        else nav.classList.remove('scrolled');
      };
      onScroll();
      window.addEventListener('scroll', onScroll, { passive: true });

      // Fermer le menu si on resize en desktop
      const mq = window.matchMedia('(min-width: 64rem)');
      const handleMQ = () => { if (mq.matches) closeMenu(); };
      mq.addEventListener ? mq.addEventListener('change', handleMQ) : mq.addListener(handleMQ);

      // Fermer si on clique un lien du menu (UX)
      menu.querySelectorAll('a').forEach(a => {
        a.addEventListener('click', () => closeMenu());
      });
    })();
  </script>
<script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>



<script>
(function(){
  const D = document.documentElement;
  const B = document.body;

  // Quand la page est prête → ajoute la classe pour déclencher le fade-in
  window.addEventListener('DOMContentLoaded', ()=>{
    requestAnimationFrame(()=> B.classList.add('page-loaded'));
  });

  // Assurer que le body reste visible en cas de back/forward cache
  window.addEventListener('pageshow', ()=> {
    B.classList.add('page-loaded');
    D.classList.remove('is-animating');
  });

  // Capture les clics sur liens internes
  document.addEventListener('click', function(e){
    const a = e.target.closest('a');
    if(!a) return;
    const url = a.getAttribute('href') || '';
    // ignorer externes, ancres, mailto, tel...
    const isExternal = /^https?:\/\//i.test(url) && !url.includes(location.host);
    const isHash = url.startsWith('#');
    const newTab = a.target === '_blank';
    const special = url.startsWith('mailto:') || url.startsWith('tel:') || url.startsWith('javascript:');
    if (isExternal || isHash || newTab || special) return;

    e.preventDefault();
    D.classList.add('is-animating'); // déclenche fade-out
    setTimeout(() => { window.location.href = url; }, 400); // même durée que CSS
  });
})();
</script>



<script>
const SUPABASE_URL = "https://qdnejvjedtjmnijdbmaw.supabase.co";
const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFkbmVqdmplZHRqbW5pamRibWF3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MzY1MzYsImV4cCI6MjA3NTUxMjUzNn0.xveNlH2LgbsJtp0Z8-Q8mGeF7bbI4MvtUb9wp2KBc2A";

async function supa(path) {
  const res = await fetch(`${SUPABASE_URL}${path}`, {
    headers: {
      apikey: SUPABASE_KEY,
      Authorization: `Bearer ${SUPABASE_KEY}`
    },
    cache: "no-cache"
  });
  if (!res.ok) throw new Error(await res.text());
  return res.json();
}

// KPI
async function loadKPI() {
  const rows = await supa(`/rest/v1/kpi_summary?select=*&order=updated_at.desc&limit=1`);
  if (!rows.length) return;
  const k = rows[0];
  document.getElementById("kpi-apy").textContent = `${Number(k.apy_min).toFixed(0)} – ${Number(k.apy_max).toFixed(0)} %`;
  document.getElementById("kpi-weekly").textContent = `${Number(k.weekly_return).toFixed(2)} %`;
  document.getElementById("kpi-tvl").textContent = `$${Number(k.tvl_usd).toLocaleString("en-US")}`;
  document.getElementById("kpi-investors").textContent = `${k.investors ?? 0}`;
}

// TVL
const tvlChart = echarts.init(document.getElementById('tvlChart'));
function renderTVL(rows, range='6M') {
  const labels = rows.map(r => r.date);
  const data = rows.map(r => Number(r.tvl_usd));
  function slice(range) {
    if (range==='1M')  return { L: labels.slice(-4),  D: data.slice(-4) };
    if (range==='3M')  return { L: labels.slice(-12), D: data.slice(-12) };
    if (range==='6M')  return { L: labels.slice(-26), D: data.slice(-26) };
    if (range==='YTD') return { L: labels.slice(-52), D: data.slice(-52) };
    return { L: labels, D: data };
  }
  const { L, D } = slice(range);
  tvlChart.setOption({
    backgroundColor:'transparent',
    tooltip:{ trigger:'axis', axisPointer:{type:'cross'},
      backgroundColor:'rgba(0,0,0,0.75)', borderColor:'#00B2FF', textStyle:{ color:'#E6EEF8' } },
    grid:{ left:40, right:20, top:20, bottom:30, containLabel:true },
    dataZoom:[{ type:'inside', throttle:30 }],
    xAxis:{ type:'category', data:L, axisLine:{ lineStyle:{ color:'#E6EEF8' } }, axisLabel:{ color:'#E6EEF8' } },
    yAxis:{ type:'value', axisLine:{ lineStyle:{ color:'#E6EEF8' } }, splitLine:{ lineStyle:{ color:'rgba(255,255,255,.05)' } }, axisLabel:{ color:'#E6EEF8' } },
    series:[{ name:'TVL ($)', type:'line', data:D, smooth:true, showSymbol:true, symbol:'circle', symbolSize:6,
      lineStyle:{ width:3, color:new echarts.graphic.LinearGradient(0,0,1,0,[{offset:0,color:'#8A0AFF'},{offset:.5,color:'#3A3FFF'},{offset:1,color:'#00C9E8'}]) },
      areaStyle:{ opacity:.15, color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:'#00B2FF'},{offset:1,color:'transparent'}]) },
      itemStyle:{ color:'#00B2FF', borderColor:'#fff', borderWidth:1.2 }
    }]
  }, true);
  document.querySelectorAll('.chart-buttons button')?.forEach(btn=>{
    btn.onclick = ()=>{
      document.querySelectorAll('.chart-buttons button').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      renderTVL(rows, btn.dataset.range);
    };
  });
}
async function loadTVL() {
  const rows = await supa(`/rest/v1/tvl_history?select=date,tvl_usd&order=date.asc`);
  if (rows.length) renderTVL(rows,'6M');
  window.addEventListener('resize', ()=> tvlChart.resize());
}

// Weekly returns + Drawdown
const weeklyChart = echarts.init(document.getElementById('weeklyChart'));
const ddChart = echarts.init(document.getElementById('ddChart'));

function renderWeekly(rows, range='3M') {
  const Lfull = rows.map(r=>r.week);
  const Pfull = rows.map(r=>Number(r.pct));
  function slice(range){ if(range==='3M')return{L:Lfull.slice(-12),P:Pfull.slice(-12)}; if(range==='6M')return{L:Lfull.slice(-26),P:Pfull.slice(-26)}; return {L:Lfull,P:Pfull}; }
  const {L,P}=slice(range);
  const avg = P.length ? +(P.reduce((s,v)=>s+v,0)/P.length).toFixed(2) : 0;
  const maxPos = Math.max(0,...P.filter(v=>v>0));
  const maxNeg = Math.max(0,...P.filter(v=>v<0).map(v=>Math.abs(v)));
  const grad=(h,t)=>new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:`hsla(${h},85%,${58-18*t}%,1)`},{offset:1,color:`hsla(${h},85%,${58-18*t}%,.35)`}]);
  const colorFor = v => v>=0 ? grad(150, maxPos? v/maxPos:0) : grad(0, maxNeg? Math.abs(v)/maxNeg:0);
  weeklyChart.setOption({
    backgroundColor:'transparent',
    tooltip:{ trigger:'axis', axisPointer:{type:'shadow'},
      backgroundColor:'rgba(0,0,0,.75)', borderColor:'#00B2FF', textStyle:{color:'#E6EEF8'} },
    grid:{ left:40, right:16, top:18, bottom:28, containLabel:true },
    xAxis:{ type:'category', data:L, axisLine:{lineStyle:{color:'#E6EEF8'}}, axisLabel:{color:'#E6EEF8'} },
    yAxis:{ type:'value', axisLine:{lineStyle:{color:'#E6EEF8'}}, splitLine:{lineStyle:{color:'rgba(255,255,255,.05)'}}, axisLabel:{color:'#E6EEF8', formatter:v=>v+' %'} },
    series:[{ type:'bar', data:P.map(v=>({value:v, itemStyle:{color:colorFor(v)}})), barWidth:'60%',
      markLine:{ symbol:'none', lineStyle:{ type:'dashed', color:'#3A3FFF' }, label:{show:false}, data:[{ yAxis: avg }] } }]
  }, true);
  document.querySelectorAll('#wr-buttons button').forEach(btn=>{
    btn.onclick=()=>{
      document.querySelectorAll('#wr-buttons button').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active'); renderWeekly(rows, btn.dataset.range);
    };
  });
}

function renderDrawdown(rows, range='3M'){
  const pct = rows.map(r=>Number(r.pct));
  const labels = rows.map(r=>r.week);
  const equity=[]; let e=100; for(const p of pct){ e*= (1+p/100); equity.push(e); }
  const dd=[]; let peak=-Infinity; for(const x of equity){ peak=Math.max(peak,x); dd.push(((x/peak)-1)*100); }
  function slice(range,L,D){ if(range==='3M')return{L:L.slice(-12),D:D.slice(-12)}; if(range==='6M')return{L:L.slice(-26),D:D.slice(-26)}; return {L,D}; }
  const {L,D}=slice(range,labels,dd);
  ddChart.setOption({
    backgroundColor:'transparent',
    tooltip:{ trigger:'axis', axisPointer:{type:'cross'},
      backgroundColor:'rgba(0,0,0,.75)', borderColor:'#00B2FF', textStyle:{color:'#E6EEF8'},
      formatter:p=>`<strong>Semaine ${p[0].axisValue}</strong><br>Drawdown: ${p[0].data.toFixed(2)} %` },
    grid:{ left:40, right:16, top:18, bottom:28, containLabel:true },
    xAxis:{ type:'category', data:L, axisLine:{lineStyle:{color:'#E6EEF8'}}, axisLabel:{color:'#E6EEF8'} },
    yAxis:{ type:'value', axisLine:{lineStyle:{color:'#E6EEF8'}}, splitLine:{lineStyle:{color:'rgba(255,255,255,.05)'}}, axisLabel:{color:'#E6EEF8', formatter:v=>v+' %'} },
    series:[{ type:'line', data:D.map(v=>+v.toFixed(2)), smooth:true, symbol:'none',
      lineStyle:{ width:2, color:'#ff5c5c' },
      areaStyle:{ color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:'rgba(255,92,92,.55)'},{offset:1,color:'rgba(255,92,92,0)'}]) } }]
  }, true);
  document.querySelectorAll('#dd-buttons button').forEach(btn=>{
    btn.onclick=()=>{
      document.querySelectorAll('#dd-buttons button').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active'); renderDrawdown(rows, btn.dataset.range);
    };
  });
}

async function loadWeeklyAndDD(){
  const rows = await supa(`/rest/v1/weekly_returns?select=week,pct&order=week.asc`);
  if(rows.length){
    renderWeekly(rows,'3M'); renderDrawdown(rows,'3M');
    window.addEventListener('resize', ()=>{ weeklyChart.resize(); ddChart.resize(); });
  }
}

// Allocation
const donut = echarts.init(document.getElementById('allocDonut'));
async function loadAllocation(){
  // ✅ ne demander que les colonnes existantes
  const rows = await supa(`/rest/v1/allocation?select=strategy,pct&order=strategy.asc`);
  if(!rows.length) return;

  // ✅ construire la série avec les colonnes réelles
  const data = rows.map(r => ({
    value: Number(r.pct),
    name: r.strategy
  }));

  donut.setOption({
    backgroundColor:'transparent',
    tooltip:{ trigger:'item', backgroundColor:'rgba(0,0,0,.75)', borderColor:'#00B2FF', textStyle:{ color:'#E6EEF8' } },
    series:[{
      name:'Allocation',
      type:'pie',
      radius:['55%','80%'],
      avoidLabelOverlap:true,
      itemStyle:{ borderColor:'#050A14', borderWidth:2 },
      label:{ color:'#E6EEF8', formatter:'{b}\n{d}%'},
      data
    }]
  }, true);

  // responsive
  function resizeDonut(){
    const m = window.matchMedia('(max-width:768px)').matches;
    donut.setOption({ series:[{ radius: m ? ['45%','70%'] : ['55%','80%'] }] });
    donut.resize();
  }
  resizeDonut();
  window.addEventListener('resize', resizeDonut);
}


// Boot
(async function(){
  try{
    await Promise.all([loadKPI(), loadTVL(), loadWeeklyAndDD(), loadAllocation()]);
  }catch(e){
    console.error(e);
  }
})();
</script>
<script>
const d = new Date(k.updated_at);
document.getElementById("kpi-updated")?.textContent =
  `Données mises à jour le ${new Date(k.updated_at).toLocaleDateString("fr-FR")}`;
</script>
</body>
</html>

